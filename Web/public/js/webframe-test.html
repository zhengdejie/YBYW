<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
		<title>WebFrame Test</title>
		<script type="text/javascript" src="jquery-2.1.3.js"></script>
		<script type="text/javascript" src="webframe.js"></script>
		<style>
		a{
			display: block;
		}
		</style>
	</head>
	<body>
		<div id="page_title"></div>
		<h3>AJAX</h3>
		<a href="javascript:testJqueryAJAX();">test ajax call</a>
		<script>
			function testJqueryAJAX(){
				webframe.onLoaded(function(){
					if(!window.appCurrentUser){
						webframe.alert('你还没有登陆');
						return;
					}

					$.getJSON("/profile/" + window.appCurrentUserId + ".json", function(d){

						webframe.alert('调用API成功: ' + JSON.stringify(d));
					});
				})
			}
		</script>
		<h3>Pages</h3>
		<a href="javascript:webframe.openUrl('?q='+new Date().getTime());">open new window</a>
		<a href="javascript:webframe.openUrl('?q='+new Date().getTime(), 'modal');">open new window modal</a>
		<a href="javascript:webframe.openUrl('?q='+new Date().getTime(), 'replace');">replace current window</a>
		<h3>Action Buttons</h3>
		<a href="javascript:webframe.setActionButton({title:'B1'});">add action button</a>
		<a href="javascript:webframe.setActionButton({title:'B2', id: 2});">add action button with ID</a>
		<a href="javascript:webframe.removeActionButton(1)">remove action button 1</a>
		<a href="javascript:webframe.removeActionButton(2)">remove action button 2</a>
		<script>
			webframe.onActionButtonClicked(function(id){
				alert('action button clicked: ' + id);
			});
		</script>
		<h3>Location</h3>
		<a href="javascript:webframe.requestLocation(requestLocationCallback);">get location</a>
		<script>
			function requestLocationCallback(data){
				alert(JSON.stringify(data));
			}
		</script>
		<h3>Misc</h3>
		<a href="javascript:webframe.showActionSheet({title: 'BBB', buttons: [{id:'1', title:'B1'},{id:'2', title:'B2'},{id:'3', title:'B3'}]}, function(id){alert(id)});">show action sheet</a>
		<a href="javascript:webframe.showAlert({title: 'BBB', buttonCancel: 'Cancel', buttons: [{id:'1', title:'B1'},{id:'2', title:'B2'},{id:'3', title:'B3'}]}, function(id){alert(id)});">show alert</a>
		<a href="javascript:webframe.showInput({title: 'BBB', inputMultiline: 2, message: 'ccc', buttonOK: 'ok', buttonCancel: 'cancel', inputDefault: 'HHH'}, function(id){alert(id)});">show input</a>
		<a href="javascript:webframe.promptType('date', '日期', '1985-11-8', function(id){alert(id)});">show date input</a>
		<a href="javascript:webframe.promptType('time', '时间', '1:8', function(id){alert(id)});">show time input</a>
		<a href="javascript:webframe.promptType('password', '密码', null, function(id){alert(id)});">show password input</a>
		<a href="javascript:webframe.alert(navigator.userAgent)">navigator.userAgent</a>
		<a href="javascript:webframe.copyText(new Date().getTime()+'')">copy to clipboard</a>
		<a href="javascript:webframe.finish()">finish</a>
		<a href="javascript:webframe.finish({a: 'b'})">finish with data</a>
		<script>
			webframe.onChildPageFinished(function(d){
				alert('child page finished: ' + JSON.stringify(d));
			});
		</script>
	</body>
</html>